<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos  -->
			<title>File Source for popoon.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
											</head>
		<body>
						<h1>Source for file popoon.php</h1>
<p>Documentation is available at <a href="../popoon/_popoon_php.html">popoon.php</a></p>
<div class="src-code">
<pre><ol><li><a name="a1"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a2"></a>&nbsp;</li>
<li><a name="a3"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a4"></a><span class="src-comm">// | popoon                                                               |</span></li>
<li><a name="a5"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a6"></a><span class="src-comm">// | Copyright (c) 2001,2002,2003,2004 Bitflux GmbH                       |</span></li>
<li><a name="a7"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a8"></a><span class="src-comm">// | Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);      |</span></li>
<li><a name="a9"></a><span class="src-comm">// | you may not use this file except in compliance with the License.     |</span></li>
<li><a name="a10"></a><span class="src-comm">// | You may obtain a copy of the License at                              |</span></li>
<li><a name="a11"></a><span class="src-comm">// | http://www.apache.org/licenses/LICENSE-2.0                           |</span></li>
<li><a name="a12"></a><span class="src-comm">// | Unless required by applicable law or agreed to in writing, software  |</span></li>
<li><a name="a13"></a><span class="src-comm">// | distributed under the License is distributed on an &quot;AS IS&quot; BASIS,    |</span></li>
<li><a name="a14"></a><span class="src-comm">// | WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or      |</span></li>
<li><a name="a15"></a><span class="src-comm">// | implied. See the License for the specific language governing         |</span></li>
<li><a name="a16"></a><span class="src-comm">// | permissions and limitations under the License.                       |</span></li>
<li><a name="a17"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a18"></a><span class="src-comm">// | Author: Christian Stocker &lt;chregu@bitflux.ch&gt;                        |</span></li>
<li><a name="a19"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a20"></a><span class="src-comm">//</span></li>
<li><a name="a21"></a><span class="src-comm">// $Id: fsource_popoon__popoon.php.html,v 1.2 2004/03/08 07:37:48 chregu Exp $</span></li>
<li><a name="a22"></a>&nbsp;</li>
<li><a name="a23"></a><span class="src-comm">// version check</span></li>
<li><a name="a24"></a>&nbsp;</li>
<li><a name="a23"></a>&nbsp;</li>
<li><a name="a24"></a>&nbsp;</li>
<li><a name="a25"></a><span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/version_compare">version_compare</a><span class="src-sym">(</span><span class="src-str">&quot;4.9.9&quot;</span><span class="src-sym">,</span><a href="http://www.php.net/phpversion">phpversion</a><span class="src-sym">(</span><span class="src-sym">)) </span>&gt; <span class="src-num">0</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a26"></a>       <span class="src-php">?&gt;</span></li>
<li><a name="a27"></a>&lt;pre&gt;</li>
<li><a name="a28"></a>This is popoon for PHP 5!</li>
<li><a name="a29"></a>&nbsp;</li>
<li><a name="a30"></a>Please checkout (or update) the PHP 4 branch with</li>
<li><a name="a31"></a>&nbsp;</li>
<li><a name="a32"></a>cvs co -r POPOON_PHP4</li>
<li><a name="a33"></a>&nbsp;</li>
<li><a name="a34"></a>Or finally switch to PHP 5 ;)</li>
<li><a name="a35"></a>&nbsp;</li>
<li><a name="a36"></a>If questions ask on popoon-dev@lists.bitflux.ch</li>
<li><a name="a37"></a>&lt;/pre&gt;</li>
<li><a name="a38"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a39"></a><span class="src-key">die</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a40"></a><span class="src-sym">}</span></li>
<li><a name="a41"></a>&nbsp;</li>
<li><a name="a42"></a><span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/function_exists">function_exists</a><span class="src-sym">(</span><span class="src-str">&quot;__autoload&quot;</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a43"></a>&nbsp;</li>
<li><a name="a44"></a>  <span class="src-inc">include_once</span><span class="src-sym">(</span><span class="src-str">&quot;autoload.php&quot;</span><span class="src-sym">)</span><span class="src-sym">;  </span></li>
<li><a name="a45"></a><span class="src-sym">}</span></li>
<li><a name="a46"></a>&nbsp;</li>
<li><a name="a47"></a><span class="src-doc">/**</span></li>
<li><a name="a48"></a><span class="src-doc">* We have different error levels in popoon, it's much like</span></li>
<li><a name="a49"></a><span class="src-doc">*  the PHP error handling. With PEAR::raiseError you can</span></li>
<li><a name="a50"></a><span class="src-doc">*  declare how severe your error is.</span></li>
<li><a name="a51"></a><span class="src-doc">**/</span></li>
<li><a name="a51"></a>&nbsp;</li>
<li><a name="a52"></a><span class="src-doc">/**</span></li>
<li><a name="a53"></a><span class="src-doc">* Won't produce any output ever</span></li>
<li><a name="a54"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_SILENT</span></li>
<li><a name="a55"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a56"></a><span class="src-doc">*/</span></li>
<li><a name="a57"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_SILENT'</span><span class="src-sym">,     </span><span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a58"></a><span class="src-doc">/**</span></li>
<li><a name="a59"></a><span class="src-doc">* Errors, which are not that grave</span></li>
<li><a name="a60"></a><span class="src-doc">* Errors with that level won't disturb popoon. They are more</span></li>
<li><a name="a61"></a><span class="src-doc">*  of an informational level</span></li>
<li><a name="a62"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_NOTICE</span></li>
<li><a name="a63"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a64"></a><span class="src-doc">*/</span></li>
<li><a name="a65"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_NOTICE'</span><span class="src-sym">,     </span><span class="src-num">2</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a66"></a><span class="src-doc">/**</span></li>
<li><a name="a67"></a><span class="src-doc">* Errors, which should be avoided, but the script is able to run further</span></li>
<li><a name="a68"></a><span class="src-doc">* Errors with that level could have bad effects on popoon, but normally don't</span></li>
<li><a name="a69"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_WARNING</span></li>
<li><a name="a70"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a71"></a><span class="src-doc">*/</span></li>
<li><a name="a72"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_WARNING'</span><span class="src-sym">,     </span><span class="src-num">4</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a73"></a><span class="src-doc">/**</span></li>
<li><a name="a74"></a><span class="src-doc">* Errors, which stop the execution of popoon</span></li>
<li><a name="a75"></a><span class="src-doc">* Errors with that level have severe impact on popoon and the script will be stoped</span></li>
<li><a name="a76"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_WARNING</span></li>
<li><a name="a77"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a78"></a><span class="src-doc">*/</span></li>
<li><a name="a79"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_FATAL'</span><span class="src-sym">,       </span><span class="src-num">8</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a80"></a>&nbsp;</li>
<li><a name="a81"></a><span class="src-doc">/**</span></li>
<li><a name="a82"></a><span class="src-doc">* Can be used for old deprecated functions..</span></li>
<li><a name="a83"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_DEPRECATED</span></li>
<li><a name="a84"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a85"></a><span class="src-doc">*/</span></li>
<li><a name="a86"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_DEPRECATED'</span><span class="src-sym">,       </span><span class="src-num">16</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a87"></a>&nbsp;</li>
<li><a name="a88"></a><span class="src-doc">/**</span></li>
<li><a name="a89"></a><span class="src-doc">* No Error-reporting at all....</span></li>
<li><a name="a90"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_NONE</span></li>
<li><a name="a91"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a92"></a><span class="src-doc">*/</span></li>
<li><a name="a93"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_NONE'</span><span class="src-sym">, </span><span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a94"></a><span class="src-doc">/**</span></li>
<li><a name="a95"></a><span class="src-doc">* Every error-reporting level</span></li>
<li><a name="a96"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_NONE</span></li>
<li><a name="a97"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a98"></a><span class="src-doc">*/</span></li>
<li><a name="a99"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_ALL'</span><span class="src-sym">, </span><span class="src-num">31</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a100"></a><span class="src-doc">/**</span></li>
<li><a name="a101"></a><span class="src-doc">* Default error-reporting level</span></li>
<li><a name="a102"></a><span class="src-doc">* At the moment = POPOON_ERROR_ALL</span></li>
<li><a name="a103"></a><span class="src-doc">* </span><span class="src-doc-tag">@const</span><span class="src-doc"> POPOON_ERROR_NONE</span></li>
<li><a name="a104"></a><span class="src-doc">* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a105"></a><span class="src-doc">*/</span></li>
<li><a name="a106"></a><a href="http://www.php.net/define">define</a><span class="src-sym">(</span><span class="src-str">'POPOON_ERROR_DEFAULT'</span><span class="src-sym">, </span><span class="src-id">POPOON_ERROR_ALL</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a107"></a>&nbsp;</li>
<li><a name="a108"></a><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'_POPOON_errorLevel'</span><span class="src-sym">]</span>= <span class="src-id"><a href="../popoon/_popoon_php.html#definePOPOON_ERROR_DEFAULT">POPOON_ERROR_DEFAULT</a></span><span class="src-sym">;</span></li>
<li><a name="a109"></a>&nbsp;</li>
<li><a name="a110"></a>&nbsp;</li>
<li><a name="a111"></a><span class="src-doc">/**</span></li>
<li><a name="a112"></a><span class="src-doc">* Class for doing everything in popoon :)</span></li>
<li><a name="a113"></a><span class="src-doc">*</span></li>
<li><a name="a114"></a><span class="src-doc">* </span><span class="src-doc-coretag">@author</span><span class="src-doc">   Christian Stocker &lt;chregu@bitflux.ch&gt;</span></li>
<li><a name="a115"></a><span class="src-doc">* </span><span class="src-doc-coretag">@version</span><span class="src-doc">  $Id: fsource_popoon__popoon.php.html,v 1.2 2004/03/08 07:37:48 chregu Exp $</span></li>
<li><a name="a116"></a><span class="src-doc">* </span><span class="src-doc-coretag">@package</span><span class="src-doc">  popoon</span></li>
<li><a name="a117"></a><span class="src-doc">*/</span></li>
<li><a name="a118"></a><span class="src-key">class </span><a href="../popoon/popoon.html">popoon</a> <span class="src-sym">{</span></li>
<li><a name="a119"></a>&nbsp;</li>
<li><a name="a120"></a>    <span class="src-doc">/**</span></li>
<li><a name="a121"></a><span class="src-doc">	* The Directory, where the cached sitemaps should be saved</span></li>
<li><a name="a122"></a><span class="src-doc">	*</span></li>
<li><a name="a123"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">string </span></li>
<li><a name="a124"></a><span class="src-doc">	*/</span></li>
<li><a name="a125"></a>    <span class="src-key">private </span><a href="../popoon/popoon.html#var$cacheDir">$cacheDir</a> = <span class="src-str">&quot;./tmp/&quot;</span><span class="src-sym">;</span></li>
<li><a name="a126"></a>&nbsp;</li>
<li><a name="a127"></a>    <span class="src-doc">/**</span></li>
<li><a name="a128"></a><span class="src-doc">	* Error Level</span></li>
<li><a name="a129"></a><span class="src-doc">	* It's a static variable so it used in every instance of popoon</span></li>
<li><a name="a130"></a><span class="src-doc">	*</span></li>
<li><a name="a131"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@var </span><span class="src-doc-type">int </span></li>
<li><a name="a133"></a><span class="src-doc">	*/</span></li>
<li><a name="a134"></a>    <span class="src-key">private </span><a href="../popoon/popoon.html#var$errorLevel">$errorLevel</a> = <span class="src-id">POPOON_ERROR_DEFAULT</span><span class="src-sym">;</span></li>
<li><a name="a135"></a>&nbsp;</li>
<li><a name="a136"></a>    <span class="src-doc">/**</span></li>
<li><a name="a137"></a><span class="src-doc">    * Constructor</span></li>
<li><a name="a138"></a><span class="src-doc">    *</span></li>
<li><a name="a139"></a><span class="src-doc">	* If $sitemapFile (or more) is provided, the method run() is immediately called.</span></li>
<li><a name="a140"></a><span class="src-doc">	*</span></li>
<li><a name="a141"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$sitemapFile </span><span class="src-doc">the location of sitemap.xml, can be relativ</span></li>
<li><a name="a142"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$uri </span><span class="src-doc">the uri of the call, optional (takes _SERVER[&quot;REQUEST_URI&quot;] then)</span></li>
<li><a name="a143"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">array </span><span class="src-doc-var">$options </span><span class="src-doc">class variable options</span></li>
<li><a name="a144"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@see</span><span class="src-doc"> run()</span></li>
<li><a name="a145"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a146"></a><span class="src-doc">	*/</span></li>
<li><a name="a147"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodpopoon">popoon</a> <span class="src-sym">(</span><span class="src-var">$sitemapFile </span>= <span class="src-id">null</span><span class="src-sym">, </span><span class="src-var">$uri </span>= <span class="src-id">null</span><span class="src-sym">, </span><span class="src-id">popoon_classes_config </span><span class="src-var">$options</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a148"></a>&nbsp;</li>
<li><a name="a149"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$options</span><span class="src-sym">-&gt;</span><span class="src-id">doOutputCache</span><span class="src-sym">(</span><span class="src-sym">)) </span></li>
<li><a name="a150"></a>        <span class="src-sym">{</span></li>
<li><a name="a151"></a>            <span class="src-comm">//include_once(&quot;popoon/sitemap/outputcache.php&quot;);</span></li>
<li><a name="a152"></a>            <span class="src-var">$oc </span>= <span class="src-key">new </span><span class="src-id"><a href="../popoon/popoon_sitemap_outputcache.html">popoon_sitemap_outputcache</a></span><span class="src-sym">(</span><span class="src-var">$options</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a153"></a>            <span class="src-var">$oc</span><span class="src-sym">-&gt;</span><span class="src-id">start</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a154"></a>        <span class="src-sym">} </span></li>
<li><a name="a155"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$sitemapFile </span>!== <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a156"></a>        <span class="src-sym">{</span></li>
<li><a name="a157"></a>            <span class="src-var">$sm </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/popoon.html#methodrun">run</a><span class="src-sym">(</span><a href="http://www.php.net/realpath">realpath</a><span class="src-sym">(</span><span class="src-var">$sitemapFile</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-var">$uri</span><span class="src-sym">,</span><span class="src-var">$options</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a158"></a>        <span class="src-sym">}</span></li>
<li><a name="a159"></a>&nbsp;</li>
<li><a name="a160"></a>        <span class="src-key">if </span><span class="src-sym">( </span><span class="src-var">$options</span><span class="src-sym">-&gt;</span><span class="src-id">doSaveOutputCache</span><span class="src-sym">(</span><span class="src-sym">))</span></li>
<li><a name="a161"></a>        <span class="src-sym">{</span></li>
<li><a name="a162"></a>            <span class="src-var">$oc</span><span class="src-sym">-&gt;</span><span class="src-id">end</span><span class="src-sym">(</span><span class="src-var">$sm</span><span class="src-sym">, </span><span class="src-var">$options</span><span class="src-sym">-&gt;</span><span class="src-id">outputCacheExpire</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a163"></a>        <span class="src-sym">}</span></li>
<li><a name="a164"></a>    <span class="src-sym">}</span></li>
<li><a name="a165"></a>&nbsp;</li>
<li><a name="a166"></a>    <span class="src-doc">/**</span></li>
<li><a name="a167"></a><span class="src-doc">	* runs the sitemap</span></li>
<li><a name="a168"></a><span class="src-doc">	*</span></li>
<li><a name="a169"></a><span class="src-doc">	* More docu, please</span></li>
<li><a name="a170"></a><span class="src-doc">	*</span></li>
<li><a name="a171"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$sitemapFile </span><span class="src-doc">the location of sitemap.xml, can be relativ</span></li>
<li><a name="a172"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$uri </span><span class="src-doc">the uri of the call, optional (takes _SERVER[&quot;REQUEST_URI&quot;] then)</span></li>
<li><a name="a173"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">array </span><span class="src-doc-var">$options </span><span class="src-doc">class variable options</span></li>
<li><a name="a174"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@see</span><span class="src-doc"> popoon(), setOptions</span></li>
<li><a name="a175"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a176"></a><span class="src-doc">	*/</span></li>
<li><a name="a177"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodrun">run</a><span class="src-sym">(</span><span class="src-var">$sitemapFile</span><span class="src-sym">, </span><span class="src-var">$uri </span>= <span class="src-id">null</span><span class="src-sym">, </span><span class="src-var">$options </span>= <span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a178"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/popoon.html#methodsetOptions">setOptions</a><span class="src-sym">(</span><span class="src-var">$options</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a179"></a>        <span class="src-key">return  </span><span class="src-key">new </span><span class="src-id"><a href="../popoon/popoon_sitemap.html">popoon_sitemap</a></span><span class="src-sym">(</span><span class="src-var">$sitemapFile</span><span class="src-sym">,</span><span class="src-var">$uri</span><span class="src-sym">,</span><span class="src-var">$options</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a180"></a>&nbsp;</li>
<li><a name="a181"></a>    <span class="src-sym">}</span></li>
<li><a name="a182"></a>&nbsp;</li>
<li><a name="a183"></a>&nbsp;</li>
<li><a name="a184"></a>    <span class="src-doc">/**</span></li>
<li><a name="a185"></a><span class="src-doc">	* Sets class options</span></li>
<li><a name="a186"></a><span class="src-doc">	*</span></li>
<li><a name="a187"></a><span class="src-doc">	* Sets options for a class. the array has to be an associative</span></li>
<li><a name="a188"></a><span class="src-doc">	* array, where the key is a class-variable and the value is the</span></li>
<li><a name="a189"></a><span class="src-doc">	* value. With this method, you can't set class-variable, which</span></li>
<li><a name="a190"></a><span class="src-doc">	* were not defined before</span></li>
<li><a name="a191"></a><span class="src-doc">	*</span></li>
<li><a name="a192"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">array </span><span class="src-doc-var">$options </span><span class="src-doc">associative array</span></li>
<li><a name="a193"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a194"></a><span class="src-doc">	*/</span></li>
<li><a name="a195"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodsetOptions">setOptions</a><span class="src-sym">(</span><span class="src-var">$options</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a196"></a>        <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$options </span><span class="src-key">as </span><span class="src-var">$key </span>=&gt; <span class="src-var">$value</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a197"></a>            <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">$key</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a198"></a>                <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">$key </span>= <span class="src-var">$value</span><span class="src-sym">;</span></li>
<li><a name="a199"></a>            <span class="src-sym">}</span></li>
<li><a name="a200"></a>        <span class="src-sym">}</span></li>
<li><a name="a201"></a>    <span class="src-sym">}</span></li>
<li><a name="a202"></a>&nbsp;</li>
<li><a name="a203"></a>    <span class="src-doc">/**</span></li>
<li><a name="a204"></a><span class="src-doc">	* Strips the starting xml processing instruction from a xml file</span></li>
<li><a name="a205"></a><span class="src-doc">	*</span></li>
<li><a name="a206"></a><span class="src-doc">	* This is needed, if we have short_open_tag = On, because then php</span></li>
<li><a name="a207"></a><span class="src-doc">	* chokes on it. We don't need it if it's = Off.</span></li>
<li><a name="a208"></a><span class="src-doc">	*</span></li>
<li><a name="a209"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$xml </span><span class="src-doc">The XML Document as a string</span></li>
<li><a name="a210"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a211"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">string </span><span class="src-doc">The XML without the PI</span></li>
<li><a name="a212"></a><span class="src-doc">	*/</span></li>
<li><a name="a213"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodstripXmlPI">stripXmlPI</a><span class="src-sym">(</span><span class="src-var">$xml</span><span class="src-sym">)</span></li>
<li><a name="a214"></a>    <span class="src-sym">{</span></li>
<li><a name="a215"></a>        <span class="src-key">return </span><a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">&quot;#^&lt;\?xml[^&gt;]*\?&gt;\s*#&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;&quot;</span><span class="src-sym">,</span><span class="src-var">$xml</span><span class="src-sym">)</span><span class="src-sym">;;</span></li>
<li><a name="a216"></a>    <span class="src-sym">}</span></li>
<li><a name="a217"></a>&nbsp;</li>
<li><a name="a218"></a>    <span class="src-doc">/**</span></li>
<li><a name="a219"></a><span class="src-doc">	* Save a file to the filesystem</span></li>
<li><a name="a220"></a><span class="src-doc">	*</span></li>
<li><a name="a221"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$content </span><span class="src-doc">The content of the file</span></li>
<li><a name="a222"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$filename </span><span class="src-doc">The filename</span></li>
<li><a name="a223"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">bool </span></li>
<li><a name="a224"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a225"></a><span class="src-doc">	*/</span></li>
<li><a name="a226"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodsaveFile">saveFile</a><span class="src-sym">(</span><span class="src-var">$content</span><span class="src-sym">,</span><span class="src-var">$filename</span><span class="src-sym">)</span></li>
<li><a name="a227"></a>    <span class="src-sym">{</span></li>
<li><a name="a228"></a>        <span class="src-var">$fd </span>= <a href="http://www.php.net/fopen">fopen</a><span class="src-sym">(</span><span class="src-var">$filename</span><span class="src-sym">,</span><span class="src-str">&quot;w&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a229"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$fd</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a230"></a>            <a href="../popoon/popoon.html#methodpopoon">popoon</a><span class="src-sym">::</span><a href="../popoon/popoon.html#methodraiseError">raiseError</a><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">Could</span> <span class="src-id">not</span> <span class="src-id">save</span> <span class="src-var">$filename</span>. (<span class="src-id">In</span> </span><span class="src-str">&quot;</span>. __FILE__ .<span class="src-str">&quot;:&quot;</span>.__LINE__.<span class="src-str">&quot;)&quot;</span><span class="src-sym">,</span><span class="src-id"><a href="../popoon/_popoon_php.html#definePOPOON_ERROR_FATAL">POPOON_ERROR_FATAL</a></span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a231"></a>            <span class="src-key">return </span><span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a232"></a>        <span class="src-sym">}</span></li>
<li><a name="a233"></a>        <a href="http://www.php.net/fwrite">fwrite</a><span class="src-sym">(</span><span class="src-var">$fd</span><span class="src-sym">,</span><span class="src-var">$content</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a234"></a>        <a href="http://www.php.net/fclose">fclose</a><span class="src-sym">(</span><span class="src-var">$fd</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a235"></a>        <span class="src-key">return </span><span class="src-id">True</span><span class="src-sym">;</span></li>
<li><a name="a236"></a>    <span class="src-sym">}</span></li>
<li><a name="a237"></a>&nbsp;</li>
<li><a name="a238"></a>&nbsp;</li>
<li><a name="a239"></a>    <span class="src-doc">/**</span></li>
<li><a name="a240"></a><span class="src-doc">    * Trigger a PEAR error</span></li>
<li><a name="a241"></a><span class="src-doc">    *</span></li>
<li><a name="a242"></a><span class="src-doc">    * To improve performances, the PEAR.php file is included dynamically.</span></li>
<li><a name="a243"></a><span class="src-doc">    * The file is only included when an error is triggered. So, in most</span></li>
<li><a name="a244"></a><span class="src-doc">    * cases, the file isn't included and perfs are much better.</span></li>
<li><a name="a245"></a><span class="src-doc">    *</span></li>
<li><a name="a246"></a><span class="src-doc">	* After raising a PEAR_Error we call popoon::handleError(), which does</span></li>
<li><a name="a247"></a><span class="src-doc">	*  the main popoon  errorhandling (printing and dying), if PEAR_Error didn't take</span></li>
<li><a name="a248"></a><span class="src-doc">	*  any action before</span></li>
<li><a name="a249"></a><span class="src-doc">	*</span></li>
<li><a name="a250"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$msg </span><span class="src-doc">error message</span></li>
<li><a name="a251"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">int </span><span class="src-doc-var">$code </span><span class="src-doc">error code</span></li>
<li><a name="a252"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">string </span><span class="src-doc-var">$file </span><span class="src-doc">filename, where the error occured.</span></li>
<li><a name="a253"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">int </span><span class="src-doc"> </span><span class="src-doc-var">$line </span><span class="src-doc">linenumber, where the error occured.</span></li>
<li><a name="a254"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">int </span><span class="src-doc-var">$mode </span><span class="src-doc">PEAR error mode, should not be used, since this is up to the user...</span></li>
<li><a name="a255"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a256"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">object </span><span class="src-doc-type">PEAR_Error </span><span class="src-doc">Object</span></li>
<li><a name="a257"></a><span class="src-doc">    */</span></li>
<li><a name="a258"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodraiseError">raiseError</a><span class="src-sym">(</span><span class="src-var">$msg</span><span class="src-sym">, </span><span class="src-var">$code </span>= <span class="src-id">null</span><span class="src-sym">, </span><span class="src-var">$file </span>= <span class="src-id">null</span><span class="src-sym">, </span><span class="src-var">$line </span>= <span class="src-id">null</span><span class="src-sym">, </span><span class="src-var">$mode </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a259"></a>    <span class="src-sym">{</span></li>
<li><a name="a260"></a>        <span class="src-inc">include_once</span><span class="src-sym">(</span><span class="src-str">'PEAR.php'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a261"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$file </span>!== <span class="src-id">null</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a262"></a>            <span class="src-var">$err </span>= <span class="src-id">PEAR</span><span class="src-sym">::</span><span class="src-id">raiseError</span><span class="src-sym">(</span><a href="http://www.php.net/sprintf">sprintf</a><span class="src-sym">(</span><span class="src-str">&quot;%s [%s on line %d].&quot;</span><span class="src-sym">, </span><span class="src-var">$msg</span><span class="src-sym">, </span><span class="src-var">$file</span><span class="src-sym">, </span><span class="src-var">$line</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$code</span><span class="src-sym">, </span><span class="src-var">$mode </span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a263"></a>        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a264"></a>           <span class="src-var">$err </span>= <span class="src-id">PEAR</span><span class="src-sym">::</span><span class="src-id">raiseError</span><span class="src-sym">(</span><a href="http://www.php.net/sprintf">sprintf</a><span class="src-sym">(</span><span class="src-str">&quot;%s&quot;</span><span class="src-sym">, </span><span class="src-var">$msg</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$code</span><span class="src-sym">, </span><span class="src-var">$mode </span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a265"></a>        <span class="src-sym">}</span></li>
<li><a name="a266"></a>        <a href="../popoon/popoon.html#methodpopoon">popoon</a><span class="src-sym">::</span><a href="../popoon/popoon.html#methodhandleError">handleError</a><span class="src-sym">(</span><span class="src-var">$err</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a267"></a>        <span class="src-key">return </span><span class="src-var">$err</span><span class="src-sym">;</span></li>
<li><a name="a268"></a>    <span class="src-sym">}</span></li>
<li><a name="a269"></a>&nbsp;</li>
<li><a name="a270"></a>    <span class="src-doc">/**</span></li>
<li><a name="a271"></a><span class="src-doc">    * Tell whether a value is a PEAR error.</span></li>
<li><a name="a272"></a><span class="src-doc">	*</span></li>
<li><a name="a273"></a><span class="src-doc">	* This method can be used, so we don't have to load</span></li>
<li><a name="a274"></a><span class="src-doc">	* PEAR.php just for checking this...</span></li>
<li><a name="a275"></a><span class="src-doc">	*</span></li>
<li><a name="a276"></a><span class="src-doc">    *</span></li>
<li><a name="a277"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc">  </span><span class="src-doc-type">mixed </span><span class="src-doc-var">$data </span><span class="src-doc">  the value to test</span></li>
<li><a name="a278"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@access</span><span class="src-doc">  public</span></li>
<li><a name="a279"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@return </span><span class="src-doc"> </span><span class="src-doc-type">bool </span><span class="src-doc">   true if parameter is an error</span></li>
<li><a name="a280"></a><span class="src-doc">    */</span></li>
<li><a name="a281"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodisError">isError</a><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">)</span></li>
<li><a name="a282"></a>    <span class="src-sym">{</span></li>
<li><a name="a283"></a>         <span class="src-key">return </span>(bool)<span class="src-sym">(</span><a href="http://www.php.net/is_object">is_object</a><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">) </span>&amp;&amp;</li>
<li><a name="a284"></a>                      <span class="src-sym">(</span><a href="http://www.php.net/get_class">get_class</a><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">) </span>== <span class="src-str">'PEAR_Error' </span>||</li>
<li><a name="a285"></a>                      <a href="http://www.php.net/is_subclass_of">is_subclass_of</a><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">, </span><span class="src-str">'PEAR_Error'</span><span class="src-sym">)))</span><span class="src-sym">;</span></li>
<li><a name="a286"></a>    <span class="src-sym">}</span></li>
<li><a name="a287"></a>&nbsp;</li>
<li><a name="a288"></a>    <span class="src-doc">/**</span></li>
<li><a name="a289"></a><span class="src-doc">	* Handles Popoon errors</span></li>
<li><a name="a290"></a><span class="src-doc">	*</span></li>
<li><a name="a291"></a><span class="src-doc">	* This method does the error-handling of popoon</span></li>
<li><a name="a292"></a><span class="src-doc">	*</span></li>
<li><a name="a293"></a><span class="src-doc">	* popoon's error handling is based on PEAR's error handling.</span></li>
<li><a name="a294"></a><span class="src-doc">	*  A popoon error is generated with popoon::raiseError(..), which</span></li>
<li><a name="a295"></a><span class="src-doc">	*  on the other hand raises a PEAR_Error with PEAR::raiseError(..)</span></li>
<li><a name="a296"></a><span class="src-doc">	*  This way, the user can use the PEAR errorhandling which is triggered</span></li>
<li><a name="a297"></a><span class="src-doc">	*  at PEAR::raiseError(..). Therefore, if the user sets the</span></li>
<li><a name="a298"></a><span class="src-doc">	*  PEAR::setErrorHandling for example to PEAR_ERROR_CALLBACK, he can</span></li>
<li><a name="a299"></a><span class="src-doc">	*  intercept popoon-errors before we catch it here.</span></li>
<li><a name="a300"></a><span class="src-doc">	*</span></li>
<li><a name="a301"></a><span class="src-doc">	* If the PEAR::errorLevel is set to something different</span></li>
<li><a name="a302"></a><span class="src-doc">	*  than the default value (PEAR_ERROR_RETURN) nothing won't</span></li>
<li><a name="a303"></a><span class="src-doc">	*  happen here at all. Otherwise it will print the error messages</span></li>
<li><a name="a304"></a><span class="src-doc">	*  and die if it's FATAL</span></li>
<li><a name="a305"></a><span class="src-doc">	*</span></li>
<li><a name="a306"></a><span class="src-doc">	* popoon::raiseError will automatically call this method, and therefore</span></li>
<li><a name="a307"></a><span class="src-doc">	*  one doesn't have to check for errors within popoon.</span></li>
<li><a name="a308"></a><span class="src-doc">	*</span></li>
<li><a name="a309"></a><span class="src-doc">	* Performance in ErrorHandling is only important in isError, since we maybe</span></li>
<li><a name="a310"></a><span class="src-doc">	*  use this function more often. raiseError and handleError will only be</span></li>
<li><a name="a311"></a><span class="src-doc">	*  used at errors and therefore no issue for performance. Maybe one could</span></li>
<li><a name="a312"></a><span class="src-doc">	*  export this few popoon::error-functions to an external class.</span></li>
<li><a name="a313"></a><span class="src-doc">	*</span></li>
<li><a name="a314"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">object </span><span class="src-doc-type">PEAR_Error </span><span class="src-doc-var">$data </span></li>
<li><a name="a315"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@see</span><span class="src-doc"> raiseError</span></li>
<li><a name="a316"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a317"></a><span class="src-doc">	*/</span></li>
<li><a name="a318"></a>&nbsp;</li>
<li><a name="a319"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodhandleError">handleError</a><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">)</span></li>
<li><a name="a320"></a>    <span class="src-sym">{</span></li>
<li><a name="a321"></a>        <span class="src-key">if </span><span class="src-sym">(</span><a href="../popoon/popoon.html#methodpopoon">popoon</a><span class="src-sym">::</span><a href="../popoon/popoon.html#methodisError">isError</a><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$data</span><span class="src-sym">-&gt;</span><span class="src-id">getMode</span><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">PEAR_ERROR_RETURN</span><span class="src-sym">)</span></li>
<li><a name="a322"></a>        <span class="src-sym">{</span></li>
<li><a name="a323"></a>            <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">) </span>&amp;&amp; isset<span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/popoon.html#var$errorLevel">errorLevel</a><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a324"></a>                <span class="src-var">$errorLevel </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/popoon.html#var$errorLevel">errorLevel</a><span class="src-sym">;</span></li>
<li><a name="a325"></a>            <span class="src-comm">// Global error handler</span></li>
<li><a name="a326"></a>            <span class="src-sym">} </span><span class="src-key">elseif </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'_POPOON_errorLevel'</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a327"></a>                <span class="src-var">$errorLevel </span>= <span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'_POPOON_errorLevel'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a328"></a>            <span class="src-sym">}</span></li>
<li><a name="a329"></a>&nbsp;</li>
<li><a name="a330"></a>            <span class="src-comm">// if code is FATAL and mode is PEAR_ERROR_RETURN, die...</span></li>
<li><a name="a331"></a>            <span class="src-comm">// if mode is not PEAR_ERROR_RETURN, then the user likes to have the</span></li>
<li><a name="a332"></a>            <span class="src-comm">//  error mode handled differently and we don't die here</span></li>
<li><a name="a333"></a>             <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">-&gt;</span><span class="src-id">getCode</span><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-sym">&amp; </span><span class="src-id"><a href="../popoon/_popoon_php.html#definePOPOON_ERROR_FATAL">POPOON_ERROR_FATAL</a> </span><span class="src-sym">&amp; </span><span class="src-var">$errorLevel</span><span class="src-sym">)</span></li>
<li><a name="a334"></a>             <span class="src-sym">{</span></li>
<li><a name="a335"></a>                print<span class="src-sym">(</span><span class="src-str">&quot;&lt;b&gt;Fatal Error (Popoon)&lt;/b&gt;: &quot;</span>.<span class="src-var">$data</span><span class="src-sym">-&gt;</span><span class="src-id">getMessage</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;br /&gt;&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a336"></a>                <span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/function_exists">function_exists</a><span class="src-sym">(</span><span class="src-str">&quot;debug_backrace&quot;</span><span class="src-sym">))</span></li>
<li><a name="a337"></a>                <span class="src-sym">{</span></li>
<li><a name="a338"></a>                <span class="src-var">$trace </span>= <a href="http://www.php.net/debug_backtrace">debug_backtrace</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a339"></a>                print <span class="src-str">&quot;Backtrace: &lt;br/&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a340"></a>&nbsp;</li>
<li><a name="a341"></a>                <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$trace </span><span class="src-key">as </span><span class="src-var">$ent</span><span class="src-sym">)</span></li>
<li><a name="a342"></a>                <span class="src-sym">{</span></li>
<li><a name="a343"></a>                    <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a344"></a>                        echo <span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span>.<span class="src-str">':'</span><span class="src-sym">;</span></li>
<li><a name="a345"></a>                    <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'function'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a346"></a>                    <span class="src-sym">{</span></li>
<li><a name="a347"></a>                        echo <span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'function'</span><span class="src-sym">]</span>.<span class="src-str">'('</span><span class="src-sym">;</span></li>
<li><a name="a348"></a>                        <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'args'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a349"></a>                        <span class="src-sym">{</span></li>
<li><a name="a350"></a>                            <span class="src-var">$args</span>=<span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a351"></a>                            <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'args'</span><span class="src-sym">] </span><span class="src-key">as </span><span class="src-var">$arg</span><span class="src-sym">)</span></li>
<li><a name="a352"></a>                            <span class="src-sym">{</span></li>
<li><a name="a353"></a>                                <span class="src-var">$args</span>.=<span class="src-var">$arg</span>.<span class="src-str">','</span><span class="src-sym">;</span></li>
<li><a name="a354"></a>                            <span class="src-sym">}</span></li>
<li><a name="a355"></a>                            echo <a href="http://www.php.net/rtrim">rtrim</a><span class="src-sym">(</span><span class="src-var">$args</span><span class="src-sym">,</span><span class="src-str">','</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a356"></a>                        <span class="src-sym">}</span></li>
<li><a name="a357"></a>                        echo <span class="src-str">') '</span><span class="src-sym">;</span></li>
<li><a name="a358"></a>                    <span class="src-sym">}</span></li>
<li><a name="a359"></a>                    <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'line'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a360"></a>                        echo <span class="src-str">'at line '</span>.<span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'line'</span><span class="src-sym">]</span>.<span class="src-str">' '</span><span class="src-sym">;</span></li>
<li><a name="a361"></a>                    <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a362"></a>                        echo <span class="src-str">'in '</span>.<span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span><span class="src-sym">; </span>echo <span class="src-str">&quot;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a363"></a>                <span class="src-sym">}</span></li>
<li><a name="a364"></a>                <span class="src-sym">}</span></li>
<li><a name="a365"></a>                <span class="src-key">die</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a366"></a>             <span class="src-sym">}</span></li>
<li><a name="a367"></a>             <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">-&gt;</span><span class="src-id">getCode</span><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-sym">&amp; </span><span class="src-id"><a href="../popoon/_popoon_php.html#definePOPOON_ERROR_WARNING">POPOON_ERROR_WARNING</a> </span><span class="src-sym">&amp; </span><span class="src-var">$errorLevel</span><span class="src-sym">)</span></li>
<li><a name="a368"></a>             <span class="src-sym">{</span></li>
<li><a name="a369"></a>                print <span class="src-str">&quot;&lt;b&gt;Warning (Popoon)&lt;/b&gt;: &quot;</span>.<span class="src-var">$data</span><span class="src-sym">-&gt;</span><span class="src-id">getMessage</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;br /&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a370"></a>             <span class="src-sym">}</span></li>
<li><a name="a371"></a>             <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$data</span><span class="src-sym">-&gt;</span><span class="src-id">getCode</span><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-sym">&amp; </span><span class="src-id"><a href="../popoon/_popoon_php.html#definePOPOON_ERROR_NOTICE">POPOON_ERROR_NOTICE</a> </span><span class="src-sym">&amp; </span><span class="src-var">$errorLevel</span><span class="src-sym">)</span></li>
<li><a name="a372"></a>             <span class="src-sym">{</span></li>
<li><a name="a373"></a>                print <span class="src-str">&quot;&lt;b&gt;Notice (Popoon)&lt;/b&gt;: &quot;</span>.<span class="src-var">$data</span><span class="src-sym">-&gt;</span><span class="src-id">getMessage</span><span class="src-sym">(</span><span class="src-sym">) </span>.<span class="src-str">&quot;&lt;br /&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a374"></a>             <span class="src-sym">}</span></li>
<li><a name="a375"></a>&nbsp;</li>
<li><a name="a376"></a>        <span class="src-sym">}</span></li>
<li><a name="a377"></a>    <span class="src-sym">}</span></li>
<li><a name="a378"></a>&nbsp;</li>
<li><a name="a379"></a>    <span class="src-doc">/**</span></li>
<li><a name="a380"></a><span class="src-doc">	* sets errorLevel for the popoon class</span></li>
<li><a name="a381"></a><span class="src-doc">	*</span></li>
<li><a name="a382"></a><span class="src-doc">	* It works like the php-error handling. You have to bit-operate the different</span></li>
<li><a name="a383"></a><span class="src-doc">	*  popoon error-levels. At the moment these are</span></li>
<li><a name="a384"></a><span class="src-doc">	*</span></li>
<li><a name="a385"></a><span class="src-doc">	* POPOON_ERROR_NOTICE, POPOON_ERROR_WARNING, POPOON_ERROR_FATAL.</span></li>
<li><a name="a386"></a><span class="src-doc">	*</span></li>
<li><a name="a387"></a><span class="src-doc">	* You should not turn off WARNING and FATAL</span></li>
<li><a name="a388"></a><span class="src-doc">	*</span></li>
<li><a name="a389"></a><span class="src-doc">	* Default is POPOON_ERROR_DEFAULT = 7</span></li>
<li><a name="a390"></a><span class="src-doc">	*</span></li>
<li><a name="a391"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">int </span><span class="src-doc-var">$level </span><span class="src-doc">   the wished level</span></li>
<li><a name="a392"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@access</span><span class="src-doc"> public</span></li>
<li><a name="a393"></a><span class="src-doc">	* </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">int </span><span class="src-doc">old errorLevel;</span></li>
<li><a name="a394"></a><span class="src-doc">	*/</span></li>
<li><a name="a395"></a>    <span class="src-key">function </span><a href="../popoon/popoon.html#methodsetErrorLevel">setErrorLevel</a><span class="src-sym">(</span><span class="src-var">$level</span><span class="src-sym">)</span></li>
<li><a name="a396"></a>    <span class="src-sym">{</span></li>
<li><a name="a397"></a>        <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a398"></a>            <span class="src-var">$oldlevel </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/popoon.html#var$errorLevel">errorLevel</a><span class="src-sym">;</span></li>
<li><a name="a399"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/popoon.html#var$errorLevel">errorLevel</a> = <span class="src-var">$level</span><span class="src-sym">;</span></li>
<li><a name="a400"></a>&nbsp;</li>
<li><a name="a401"></a>        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a402"></a>            <span class="src-var">$oldlevel </span>= <span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'_POPOON_errorLevel'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a403"></a>            <span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'_POPOON_errorLevel'</span><span class="src-sym">] </span>= <span class="src-var">$level</span><span class="src-sym">;</span></li>
<li><a name="a404"></a>        <span class="src-sym">}</span></li>
<li><a name="a405"></a>        <span class="src-key">return </span><span class="src-var">$oldlevel</span><span class="src-sym">;</span></li>
<li><a name="a406"></a>    <span class="src-sym">}</span></li>
<li><a name="a407"></a>&nbsp;</li>
<li><a name="a408"></a>&nbsp;</li>
<li><a name="a409"></a><span class="src-sym">}</span></li>
<li><a name="a410"></a>&nbsp;</li>
<li><a name="a411"></a><span class="src-key">function </span><a href="../popoon/_popoon_php.html#functionmyErrorHandler">myErrorHandler</a> <span class="src-sym">(</span><span class="src-var">$errno</span><span class="src-sym">, </span><span class="src-var">$errstr</span><span class="src-sym">, </span><span class="src-var">$errfile</span><span class="src-sym">, </span><span class="src-var">$errline</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a412"></a>    echo <span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$errno</span>: <span class="src-var">$errstr</span> <span class="src-id">in</span> <span class="src-var">$errfile</span> <span class="src-id">at</span> <span class="src-id">line</span> <span class="src-var">$errline</span>\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a413"></a>    <span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/function_exists">function_exists</a><span class="src-sym">(</span><span class="src-str">&quot;debug_backtrace&quot;</span><span class="src-sym">))</span></li>
<li><a name="a414"></a><span class="src-sym">{</span></li>
<li><a name="a415"></a>    echo <span class="src-str">&quot;Backtrace\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a416"></a>    <span class="src-var">$trace </span>= <a href="http://www.php.net/debug_backtrace">debug_backtrace</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a417"></a>    <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$trace </span><span class="src-key">as </span><span class="src-var">$ent</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a418"></a>        <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span><span class="src-sym">)) </span>echo <span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span>.<span class="src-str">':'</span><span class="src-sym">;</span></li>
<li><a name="a419"></a>        <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'function'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a420"></a>        <span class="src-sym">{</span></li>
<li><a name="a421"></a>            echo <span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'function'</span><span class="src-sym">]</span>.<span class="src-str">'('</span><span class="src-sym">;</span></li>
<li><a name="a422"></a>            <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'args'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a423"></a>            <span class="src-sym">{</span></li>
<li><a name="a424"></a>                <span class="src-var">$args</span>=<span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a425"></a>                <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'args'</span><span class="src-sym">] </span><span class="src-key">as </span><span class="src-var">$arg</span><span class="src-sym">) </span><span class="src-sym">{ </span><span class="src-var">$args</span>.=<span class="src-var">$arg</span>.<span class="src-str">','</span><span class="src-sym">; </span><span class="src-sym">}</span></li>
<li><a name="a426"></a>                echo <a href="http://www.php.net/rtrim">rtrim</a><span class="src-sym">(</span><span class="src-var">$args</span><span class="src-sym">,</span><span class="src-str">','</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a427"></a>            <span class="src-sym">}</span></li>
<li><a name="a428"></a>            echo <span class="src-str">') '</span><span class="src-sym">;</span></li>
<li><a name="a429"></a>        <span class="src-sym">}</span></li>
<li><a name="a430"></a>        <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'line'</span><span class="src-sym">]</span><span class="src-sym">)) </span>echo <span class="src-str">'at line '</span>.<span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'line'</span><span class="src-sym">]</span>.<span class="src-str">' '</span><span class="src-sym">;</span></li>
<li><a name="a431"></a>        <span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span><span class="src-sym">)) </span>echo <span class="src-str">'in '</span>.<span class="src-var">$ent</span><span class="src-sym">[</span><span class="src-str">'file'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a432"></a>        echo <span class="src-str">&quot;&lt;hr&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a433"></a>    <span class="src-sym">}</span></li>
<li><a name="a434"></a><span class="src-sym">}</span></li>
<li><a name="a435"></a><span class="src-sym">}</span></li>
<li><a name="a436"></a>&nbsp;</li>
<li><a name="a437"></a><span class="src-php">?&gt;</span></li>
</ol></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Mon,  8 Mar 2004 08:33:30 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC2</a>
	</p>
	</body>
</html>