<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos  -->
			<title>File Source for formwizard.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
											</head>
		<body>
						<h1>Source for file formwizard.php</h1>
<p>Documentation is available at <a href="../popoon/_components_transformers_formwizard_php.html">formwizard.php</a></p>
<div class="src-code">
<pre><ol><li><a name="a1"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a2"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a3"></a><span class="src-comm">// | popoon                                                               |</span></li>
<li><a name="a4"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a5"></a><span class="src-comm">// | Copyright (c) 2001,2002,2003,2004 Bitflux GmbH                       |</span></li>
<li><a name="a6"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a7"></a><span class="src-comm">// | Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);      |</span></li>
<li><a name="a8"></a><span class="src-comm">// | you may not use this file except in compliance with the License.     |</span></li>
<li><a name="a9"></a><span class="src-comm">// | You may obtain a copy of the License at                              |</span></li>
<li><a name="a10"></a><span class="src-comm">// | http://www.apache.org/licenses/LICENSE-2.0                           |</span></li>
<li><a name="a11"></a><span class="src-comm">// | Unless required by applicable law or agreed to in writing, software  |</span></li>
<li><a name="a12"></a><span class="src-comm">// | distributed under the License is distributed on an &quot;AS IS&quot; BASIS,    |</span></li>
<li><a name="a13"></a><span class="src-comm">// | WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or      |</span></li>
<li><a name="a14"></a><span class="src-comm">// | implied. See the License for the specific language governing         |</span></li>
<li><a name="a15"></a><span class="src-comm">// | permissions and limitations under the License.                       |</span></li>
<li><a name="a16"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a17"></a><span class="src-comm">// | Author: Christian Stocker &lt;chregu@bitflux.ch&gt;                        |</span></li>
<li><a name="a18"></a><span class="src-comm">// +----------------------------------------------------------------------+</span></li>
<li><a name="a19"></a><span class="src-comm">//</span></li>
<li><a name="a20"></a><span class="src-comm">// $Id: fsource_popoon__componentstransformersformwizard.php.html,v 1.2 2004/03/08 07:37:48 chregu Exp $</span></li>
<li><a name="a21"></a>&nbsp;</li>
<li><a name="a20"></a>&nbsp;</li>
<li><a name="a21"></a>&nbsp;</li>
<li><a name="a22"></a><span class="src-inc">include_once</span><span class="src-sym">(</span><span class="src-str">&quot;popoon/components/transformer.php&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a23"></a>&nbsp;</li>
<li><a name="a24"></a><span class="src-doc">/**</span></li>
<li><a name="a25"></a><span class="src-doc">* </span><span class="src-doc-coretag">@author</span><span class="src-doc">   Christian Stocker &lt;chregu@bitflux.ch&gt;</span></li>
<li><a name="a26"></a><span class="src-doc">* </span><span class="src-doc-coretag">@version</span><span class="src-doc">  $Id: fsource_popoon__componentstransformersformwizard.php.html,v 1.2 2004/03/08 07:37:48 chregu Exp $</span></li>
<li><a name="a27"></a><span class="src-doc">* </span><span class="src-doc-coretag">@package</span><span class="src-doc">  popoon</span></li>
<li><a name="a28"></a><span class="src-doc">*/</span></li>
<li><a name="a29"></a><span class="src-key">class </span><a href="../popoon/transformer_formwizard.html">transformer_formwizard</a> <span class="src-key">extends </span><span class="src-id">transformer </span><span class="src-sym">{</span></li>
<li><a name="a30"></a>    </li>
<li><a name="a31"></a>    <span class="src-key">var </span><a href="../popoon/transformer_formwizard.html#var$XmlFormat">$XmlFormat</a> = <span class="src-str">&quot;DomDocument&quot;</span><span class="src-sym">;</span></li>
<li><a name="a32"></a>    <span class="src-key">var </span><a href="../popoon/transformer_formwizard.html#var$src">$src</a> = <span class="src-str">&quot;bla.xml&quot;</span><span class="src-sym">;</span></li>
<li><a name="a33"></a>    <span class="src-key">var </span><a href="../popoon/transformer_formwizard.html#var$lang">$lang</a> = <span class="src-str">&quot;de&quot;</span><span class="src-sym">;</span></li>
<li><a name="a34"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methodtransformer_xforms">transformer_xforms</a><span class="src-sym">(</span><span class="src-sym">&amp;</span><span class="src-var">$sitemap</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a35"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">transformer</span><span class="src-sym">(</span><span class="src-var">$sitemap</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a36"></a>    <span class="src-sym">}</span></li>
<li><a name="a37"></a>    </li>
<li><a name="a38"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methodDomStart">DomStart</a><span class="src-sym">(</span><span class="src-sym">&amp;</span><span class="src-var">$xml</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a39"></a>        <span class="src-id">parent</span><span class="src-sym">::</span><span class="src-id">DomStart</span><span class="src-sym">(</span><span class="src-var">$xml</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a40"></a>        <span class="src-var">$mafo </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getParameterDefault</span><span class="src-sym">(</span><span class="src-str">&quot;mafo&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a41"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a> = <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getParameterDefault</span><span class="src-sym">(</span><span class="src-str">&quot;lang&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a42"></a>        <span class="src-var">$xsl </span>= <span class="src-id">domxml_xslt_stylesheet_file</span><span class="src-sym">(</span><span class="src-id">BX_BITLIB_DIR</span>.<span class="src-str">&quot;/php/popoon/components/transformers/formwizard/xml2html.xsl&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a43"></a>        </li>
<li><a name="a44"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">printDebug</span><span class="src-sym">(</span><span class="src-str">&quot;XSL-File: &quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$src">src</a><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a45"></a>        </li>
<li><a name="a46"></a>        <span class="src-var">$ctxt </span>= <span class="src-var">$xml</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_new_context</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a47"></a>        <span class="src-comm">//        $ctxt-&gt;xpath_register_ns(&quot;xforms&quot;,&quot;http://www.w3.org/2002/xforms&quot;);</span></li>
<li><a name="a48"></a>        </li>
<li><a name="a49"></a>        </li>
<li><a name="a50"></a>        <span class="src-var">$xforms </span>= <span class="src-var">$ctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;//Article[lang='&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a>.<span class="src-str">&quot;']//formwizard&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a51"></a>        <span class="src-var">$wizardnode </span>= <span class="src-var">$xforms</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a52"></a>        </li>
<li><a name="a53"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a54"></a>            </li>
<li><a name="a55"></a>            </li>
<li><a name="a56"></a>            <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$_GET</span><span class="src-sym">[</span><span class="src-str">'src'</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a57"></a>                <span class="src-var">$xforms </span>= <span class="src-var">$ctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;//Article[lang='&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a>.<span class="src-str">&quot;']//formwizard[@link ='&quot;</span>.<span class="src-var">$_GET</span><span class="src-sym">[</span><span class="src-str">'src'</span><span class="src-sym">]</span>.<span class="src-str">&quot;']&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a58"></a>                <span class="src-var">$wizardnode </span>= <span class="src-var">$xforms</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a59"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a60"></a>                <span class="src-var">$subxml </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methoddrawOverview">drawOverview</a><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a61"></a>                  <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a62"></a>                        <span class="src-var">$subxml </span>= <span class="src-var">$xml</span><span class="src-sym">-&gt;</span><span class="src-id">imported_node</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">-&gt;</span><span class="src-id">document_element</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-id">true</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a63"></a>                        <span class="src-var">$parent </span>= <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">parent_node</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a64"></a>                        <span class="src-var">$parent</span><span class="src-sym">-&gt;</span><span class="src-id">replace_child</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">,</span><span class="src-var">$wizardnode</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a65"></a>                    <span class="src-sym">}</span></li>
<li><a name="a66"></a>                </li>
<li><a name="a67"></a>                <span class="src-sym">}</span></li>
<li><a name="a68"></a>            <span class="src-sym">} </span><span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">has_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;overview&quot;</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;overview&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;yes&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a69"></a>                <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$xforms</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset </span><span class="src-key">as </span><span class="src-var">$wizardnode</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a70"></a>                    <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">has_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;mafo&quot;</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a71"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;mafo&quot;</span><span class="src-sym">) </span><span class="src-sym">&amp; </span><span class="src-var">$mafo</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a72"></a>                            <span class="src-key">continue</span><span class="src-sym">;</span></li>
<li><a name="a73"></a>                        <span class="src-sym">}</span></li>
<li><a name="a74"></a>                    <span class="src-sym">}</span></li>
<li><a name="a75"></a>                    <span class="src-var">$subxml </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methoddrawGeneralOverview">drawGeneralOverview</a><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a76"></a>                    <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a77"></a>                        <span class="src-var">$subxml </span>= <span class="src-var">$xml</span><span class="src-sym">-&gt;</span><span class="src-id">imported_node</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">-&gt;</span><span class="src-id">document_element</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-id">true</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a78"></a>                        <span class="src-var">$parent </span>= <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">parent_node</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a79"></a>                        <span class="src-var">$parent</span><span class="src-sym">-&gt;</span><span class="src-id">replace_child</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">,</span><span class="src-var">$wizardnode</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a80"></a>                    <span class="src-sym">}</span></li>
<li><a name="a81"></a>                    </li>
<li><a name="a82"></a>                <span class="src-sym">}</span></li>
<li><a name="a83"></a>                </li>
<li><a name="a84"></a>            <span class="src-sym">}</span></li>
<li><a name="a85"></a>            <span class="src-key">else </span><span class="src-sym">{ </span></li>
<li><a name="a86"></a>                <span class="src-var">$src </span>= <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;src&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a87"></a>                <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config </span>= <span class="src-id">domxml_open_file</span><span class="src-sym">(</span><span class="src-id"><a href="../popoon/_examples_slideml_index_php.html#defineBX_PROJECT_DIR">BX_PROJECT_DIR</a></span>.<span class="src-str">&quot;</span><span class="src-str">/<span class="src-var">$src</span></span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a88"></a>                <span class="src-var">$confctxt </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_new_context</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a89"></a>                <span class="src-var">$confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_register_ns</span><span class="src-sym">(</span><span class="src-str">&quot;bxco&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;http://bitflux.org/config/1.0&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a90"></a>                </li>
<li><a name="a91"></a>                </li>
<li><a name="a92"></a>                <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">&quot;thisPage&quot;</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a93"></a>                    <span class="src-var">$allfields </span>= <span class="src-var">$confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:screen[@id = '&quot;</span>.<span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">&quot;thisPage&quot;</span><span class="src-sym">]</span>.<span class="src-str">&quot;']//bxco:field&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a94"></a>                    <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$allfields</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a95"></a>                        <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$allfields</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset </span><span class="src-key">as </span><span class="src-var">$node</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a96"></a>                            <span class="src-var">$fields</span><span class="src-sym">[</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span><span class="src-sym">] </span>= <span class="src-var">$node</span><span class="src-sym">;</span></li>
<li><a name="a97"></a>                            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;type&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;checkboxtext&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a98"></a>                                <span class="src-var">$fields</span><span class="src-sym">[</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;_text&quot;</span><span class="src-sym">] </span>= <span class="src-var">$node</span><span class="src-sym">;</span></li>
<li><a name="a99"></a>                            <span class="src-sym">}</span></li>
<li><a name="a100"></a>                            <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;type&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;radio&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a101"></a>                                <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">child_nodes</span><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-key">as </span><span class="src-var">$childnode</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a102"></a>                                    </li>
<li><a name="a103"></a>                                    <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$childnode</span><span class="src-sym">-&gt;</span><span class="src-id">node_name</span><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-str">&quot;option&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a104"></a>                                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$childnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;type&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;text&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a105"></a>                                            <span class="src-var">$fields</span><span class="src-sym">[</span><span class="src-var">$childnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;_text&quot;</span><span class="src-sym">] </span>=  <span class="src-var">$childnode </span><span class="src-sym">;</span></li>
<li><a name="a106"></a>                                            </li>
<li><a name="a107"></a>                                        <span class="src-sym">}</span></li>
<li><a name="a108"></a>                                    <span class="src-sym">}</span></li>
<li><a name="a109"></a>                                <span class="src-sym">}</span></li>
<li><a name="a110"></a>                            <span class="src-sym">}</span></li>
<li><a name="a111"></a>                        <span class="src-sym">}</span></li>
<li><a name="a112"></a>                    <span class="src-sym">}</span></li>
<li><a name="a113"></a>                <span class="src-sym">}</span></li>
<li><a name="a114"></a>                <span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">]</span><span class="src-sym">) </span>|| <span class="src-sym">!</span><a href="http://www.php.net/is_array">is_array</a><span class="src-sym">(</span><span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a115"></a>                    <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">] </span>= <span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a116"></a>                <span class="src-sym">}</span></li>
<li><a name="a117"></a>                <span class="src-key">if </span><span class="src-sym">( </span>isset<span class="src-sym">(</span><span class="src-var">$fields</span><span class="src-sym">) </span>&amp;&amp; <a href="http://www.php.net/is_array">is_array</a><span class="src-sym">(</span><span class="src-var">$fields</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a118"></a>                    </li>
<li><a name="a119"></a>                    <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$fields </span><span class="src-key">as </span><span class="src-var">$key </span>=&gt; <span class="src-var">$node</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a120"></a>                        <span class="src-var">$value </span>= <span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">&quot;bx_fw&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$key</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a121"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;required&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;y&quot; </span>&amp;&amp;  <a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$value</span><span class="src-sym">)) </span>== <span class="src-num">0</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a122"></a>                            <span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">set_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;error&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;required&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a123"></a>                            <span class="src-var">$error </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a124"></a>                        <span class="src-sym">}</span></li>
<li><a name="a125"></a>                        </li>
<li><a name="a126"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;type&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;session&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a127"></a>                            <span class="src-var">$bx_wizard_fields</span><span class="src-sym">[</span><span class="src-var">$key</span><span class="src-sym">] </span>= <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;auth&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">&quot;fields&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;value&quot;</span><span class="src-sym">)</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a128"></a>                        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a129"></a>                            <span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$value</span><span class="src-sym">) </span>&gt; <span class="src-num">0 </span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a130"></a>                                <span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">set_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;value&quot;</span><span class="src-sym">,</span><a href="http://www.php.net/utf8_encode">utf8_encode</a><span class="src-sym">(</span><span class="src-var">$value</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a131"></a>                            <span class="src-sym">}</span></li>
<li><a name="a132"></a>                            <span class="src-var">$bx_wizard_fields</span><span class="src-sym">[</span><span class="src-var">$key</span><span class="src-sym">] </span>= <span class="src-var">$value</span><span class="src-sym">;</span></li>
<li><a name="a133"></a>                        <span class="src-sym">}</span></li>
<li><a name="a134"></a>                    <span class="src-sym">}</span></li>
<li><a name="a135"></a>                   </li>
<li><a name="a136"></a>                    <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">] </span>= <a href="http://www.php.net/array_merge">array_merge</a><span class="src-sym">(</span><span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">]</span><span class="src-sym">,</span><span class="src-var">$bx_wizard_fields</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a137"></a>                <span class="src-sym">}</span></li>
<li><a name="a138"></a>                </li>
<li><a name="a139"></a>                <span class="src-var">$params </span>= <span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a140"></a>                </li>
<li><a name="a141"></a>                </li>
<li><a name="a142"></a>                </li>
<li><a name="a143"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$error</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a144"></a>                    <span class="src-var">$params</span><span class="src-sym">[</span><span class="src-str">'screenid'</span><span class="src-sym">] </span>= <span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">'thisPage'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a145"></a>                <span class="src-sym">}</span></li>
<li><a name="a146"></a>                <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">&quot;thisPage&quot;</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-sym">!</span><span class="src-var">$error</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a147"></a>                    <span class="src-var">$screen</span>= <span class="src-var">$confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:screen[@id = '&quot;</span>.<span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">&quot;thisPage&quot;</span><span class="src-sym">]</span>.<span class="src-str">&quot;']&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a148"></a>                    <span class="src-var">$screen </span>= <span class="src-var">$screen</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a149"></a>                    </li>
<li><a name="a150"></a>                    <span class="src-comm">//screen has a method</span></li>
<li><a name="a151"></a>                    <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$screen </span>&amp;&amp; <span class="src-var">$screen</span><span class="src-sym">-&gt;</span><span class="src-id">has_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;method&quot;</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a152"></a>                        <span class="src-var">$method </span>= <span class="src-var">$screen</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;method&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a153"></a>                        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">$method</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a154"></a>                    <span class="src-sym">}</span></li>
<li><a name="a155"></a>                <span class="src-sym">}</span></li>
<li><a name="a156"></a>                <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">'nextPage'</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-sym">!</span><span class="src-var">$error</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a157"></a>                    <span class="src-var">$params</span><span class="src-sym">[</span><span class="src-str">'screenid'</span><span class="src-sym">] </span>= <span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-str">'nextPage'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a158"></a>                <span class="src-sym">}</span></li>
<li><a name="a159"></a>                <span class="src-var">$params</span><span class="src-sym">[</span><span class="src-str">'lang'</span><span class="src-sym">] </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a><span class="src-sym">;</span></li>
<li><a name="a160"></a>      </li>
<li><a name="a161"></a>                <span class="src-var">$result </span>= <span class="src-var">$xsl</span><span class="src-sym">-&gt;</span><span class="src-id">process</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config</span><span class="src-sym">,</span><span class="src-var">$params</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a162"></a>                </li>
<li><a name="a163"></a>                <span class="src-var">$parent </span>= <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">parent_node</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a164"></a>                <span class="src-var">$subxml </span>= <span class="src-var">$result</span><span class="src-sym">-&gt;</span><span class="src-id">document_element</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a165"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a166"></a>                    <span class="src-var">$subxml </span>= <span class="src-var">$xml</span><span class="src-sym">-&gt;</span><span class="src-id">imported_node</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">,</span><span class="src-id">true</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a167"></a>                    <span class="src-var">$parent</span><span class="src-sym">-&gt;</span><span class="src-id">replace_child</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">,</span><span class="src-var">$wizardnode</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a168"></a>                <span class="src-sym">}</span></li>
<li><a name="a169"></a>                </li>
<li><a name="a170"></a>            <span class="src-sym">}</span></li>
<li><a name="a171"></a>&nbsp;</li>
<li><a name="a172"></a>        <span class="src-sym">}</span></li>
<li><a name="a173"></a>        </li>
<li><a name="a174"></a>    <span class="src-sym">}</span></li>
<li><a name="a175"></a>    </li>
<li><a name="a176"></a>    </li>
<li><a name="a177"></a>    </li>
<li><a name="a178"></a>    </li>
<li><a name="a179"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methodsaveFields">saveFields</a><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a180"></a>        <span class="src-var">$confctxt </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_new_context</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a181"></a>        <span class="src-var">$confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_register_ns</span><span class="src-sym">(</span><span class="src-str">&quot;bxco&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;http://bitflux.org/config/1.0&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a182"></a>        <span class="src-comm">// get all fields</span></li>
<li><a name="a183"></a>        <span class="src-var">$allfields </span>= <span class="src-var">$confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:screen//bxco:field[@type!= 'msg']&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a184"></a>        <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$allfields</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a185"></a>            <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$allfields</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset </span><span class="src-key">as </span><span class="src-var">$node</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a186"></a>                <span class="src-var">$fields</span><span class="src-sym">[</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span><span class="src-sym">] </span>= <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span><span class="src-sym">] </span><span class="src-sym">;</span></li>
<li><a name="a187"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;type&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;checkboxtext&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a188"></a>                    <span class="src-var">$fields</span><span class="src-sym">[</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;_text&quot;</span><span class="src-sym">] </span>=  <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;_text&quot;</span><span class="src-sym">] </span><span class="src-sym">;</span></li>
<li><a name="a189"></a>                <span class="src-sym">} </span></li>
<li><a name="a190"></a>                </li>
<li><a name="a191"></a>                <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;type&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;radio&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a192"></a>                    <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">child_nodes</span><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-key">as </span><span class="src-var">$childnode</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a193"></a>                        </li>
<li><a name="a194"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$childnode</span><span class="src-sym">-&gt;</span><span class="src-id">node_name</span><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-str">&quot;option&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a195"></a>                            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$childnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;type&quot;</span><span class="src-sym">) </span>== <span class="src-str">&quot;text&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a196"></a>                                <span class="src-var">$fields</span><span class="src-sym">[</span><span class="src-var">$childnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;_text&quot;</span><span class="src-sym">] </span>=  <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$childnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;_text&quot;</span><span class="src-sym">] </span><span class="src-sym">;</span></li>
<li><a name="a197"></a>                            <span class="src-sym">}</span></li>
<li><a name="a198"></a>                        <span class="src-sym">}</span></li>
<li><a name="a199"></a>                    <span class="src-sym">}</span></li>
<li><a name="a200"></a>                <span class="src-sym">}</span></li>
<li><a name="a201"></a>                        </li>
<li><a name="a202"></a>                </li>
<li><a name="a203"></a>                </li>
<li><a name="a204"></a>                </li>
<li><a name="a205"></a>            <span class="src-sym">}</span></li>
<li><a name="a206"></a>        <span class="src-sym">}</span></li>
<li><a name="a207"></a>        <span class="src-var">$table </span>= <span class="src-var">$confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:screen/@table&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a208"></a>        <span class="src-var">$table </span>= <span class="src-var">$table</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">-&gt;</span><span class="src-id">get_content</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a209"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$table </span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a210"></a>            <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">insert</span> <span class="src-id">into</span> `<span class="src-var">$table</span>` (`</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a211"></a>            <span class="src-var">$sql </span>.= <a href="http://www.php.net/join">join</a><span class="src-sym">(</span><span class="src-str">&quot;`,`&quot;</span><span class="src-sym">,</span><a href="http://www.php.net/array_keys">array_keys</a><span class="src-sym">(</span><span class="src-var">$fields</span><span class="src-sym">)) </span>. <span class="src-str">&quot;`) &quot;</span><span class="src-sym">;</span></li>
<li><a name="a212"></a>            <span class="src-var">$sql </span>.= <span class="src-str">&quot;VALUES ('&quot;</span>. <a href="http://www.php.net/join">join</a><span class="src-sym">(</span><span class="src-str">&quot;','&quot;</span><span class="src-sym">,</span><span class="src-var">$fields</span><span class="src-sym">) </span>.<span class="src-str">&quot; ')&quot;</span><span class="src-sym">;</span></li>
<li><a name="a213"></a>            </li>
<li><a name="a214"></a>            <span class="src-var">$db </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getParameterDefault</span><span class="src-sym">(</span><span class="src-str">&quot;db&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a215"></a>            <span class="src-var">$res </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">query</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a216"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-id">DB</span><span class="src-sym">::</span><span class="src-id">isError</span><span class="src-sym">(</span><span class="src-var">$res</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a217"></a>                </li>
<li><a name="a218"></a>                print <span class="src-var">$res</span><span class="src-sym">-&gt;</span><span class="src-id">message</span><span class="src-sym">;</span></li>
<li><a name="a219"></a>                print <span class="src-str">&quot;&lt;br/&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a220"></a>                print <span class="src-var">$res</span><span class="src-sym">-&gt;</span><span class="src-id">userinfo</span><span class="src-sym">;</span></li>
<li><a name="a221"></a>            <span class="src-sym">} </span></li>
<li><a name="a222"></a>        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a223"></a>            print <span class="src-str">&quot;no table info found&quot;</span><span class="src-sym">;</span></li>
<li><a name="a224"></a>        <span class="src-sym">}</span></li>
<li><a name="a225"></a>        <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;bx_wizard&quot;</span><span class="src-sym">] </span>= <span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a226"></a>        <span class="src-key">return </span><span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a227"></a>    <span class="src-sym">}</span></li>
<li><a name="a228"></a>    </li>
<li><a name="a229"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methodsetError">setError</a><span class="src-sym">(</span><span class="src-var">$message</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a230"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">errors </span>= <a href="http://www.php.net/utf8_encode">utf8_encode</a><span class="src-sym">( </span><span class="src-var">$message</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a231"></a>    <span class="src-sym">}</span></li>
<li><a name="a232"></a>    </li>
<li><a name="a233"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-var">$id</span><span class="src-sym">,</span><span class="src-var">$lang </span>= <span class="src-str">'de'</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a234"></a>        </li>
<li><a name="a235"></a>       <span class="src-var">$text </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str">/<span class="src-id">bxco</span>:<span class="src-id">wizard</span>/<span class="src-id">bxco</span>:<span class="src-id">lang</span>/<span class="src-id">bxco</span>:<span class="src-id">entry</span><span class="src-sym">[</span>@<span class="src-id">ID</span>='<span class="src-var">$id</span>'<span class="src-sym">]</span>/<span class="src-id">bxco</span>:<span class="src-id">text</span><span class="src-sym">[</span>@<span class="src-id">lang</span>='<span class="src-var">$lang</span>'<span class="src-sym">]</span></span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a236"></a>       <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$text</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset </span>&amp;&amp; <span class="src-var">$text</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a237"></a>           <span class="src-key">return </span><span class="src-var">$text</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">-&gt;</span><span class="src-id">get_content</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a238"></a>        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{ </span></li>
<li><a name="a239"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$lang </span>!= <span class="src-str">'de'</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a240"></a>                <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-var">$id</span><span class="src-sym">, </span><span class="src-var">$lang</span>=<span class="src-str">'de'</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a241"></a>            <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a242"></a>                <span class="src-key">return </span><span class="src-str">&quot;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a243"></a>            <span class="src-sym">}</span></li>
<li><a name="a244"></a>        <span class="src-sym">}</span><span class="src-sym">;</span></li>
<li><a name="a245"></a>    <span class="src-sym">}</span></li>
<li><a name="a246"></a>    </li>
<li><a name="a247"></a>    </li>
<li><a name="a248"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methoddrawGeneralOverview">drawGeneralOverview</a> <span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a249"></a>        <span class="src-var">$src </span>= <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;src&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a250"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config </span>= <span class="src-id">domxml_open_file</span><span class="src-sym">(</span><span class="src-id"><a href="../popoon/_examples_slideml_index_php.html#defineBX_PROJECT_DIR">BX_PROJECT_DIR</a></span>.<span class="src-str">&quot;</span><span class="src-str">/<span class="src-var">$src</span></span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a251"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_new_context</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a252"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_register_ns</span><span class="src-sym">(</span><span class="src-str">&quot;bxco&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;http://bitflux.org/config/1.0&quot;</span><span class="src-sym">)</span><span class="src-sym">;  </span></li>
<li><a name="a253"></a>        <span class="src-var">$subxml </span>= <span class="src-str">&quot;&lt;div class='wizardOverview'&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a254"></a>        <span class="src-var">$title </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:title[@lang = '&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a>.<span class="src-str">&quot;']&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a255"></a>        <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;a href='./?src=&quot;</span>. <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;link&quot;</span><span class="src-sym">) </span>.<span class="src-str">&quot;'&gt;&quot;</span>. <span class="src-var">$title</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">-&gt;</span><span class="src-id">get_content</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/a&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a256"></a>        <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;/div&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a257"></a>        <span class="src-var">$subxml </span>= <span class="src-id">domxml_open_mem</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a258"></a>        <span class="src-key">return </span><span class="src-var">$subxml</span><span class="src-sym">;</span></li>
<li><a name="a259"></a>    <span class="src-sym">}</span></li>
<li><a name="a260"></a>        </li>
<li><a name="a261"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methoddrawOverview">drawOverview</a><span class="src-sym">(</span><span class="src-var">$wizardnode</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a262"></a>        </li>
<li><a name="a263"></a>        <span class="src-var">$src </span>= <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;src&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a264"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config </span>= <span class="src-id">domxml_open_file</span><span class="src-sym">(</span><span class="src-id"><a href="../popoon/_examples_slideml_index_php.html#defineBX_PROJECT_DIR">BX_PROJECT_DIR</a></span>.<span class="src-str">&quot;</span><span class="src-str">/<span class="src-var">$src</span></span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a265"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">config</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_new_context</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a266"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_register_ns</span><span class="src-sym">(</span><span class="src-str">&quot;bxco&quot;</span><span class="src-sym">,</span><span class="src-str">&quot;http://bitflux.org/config/1.0&quot;</span><span class="src-sym">)</span><span class="src-sym">;   </span></li>
<li><a name="a267"></a>        </li>
<li><a name="a268"></a>        <span class="src-var">$subxml </span>= <span class="src-str">&quot;&lt;div class='wizardOverview'&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a269"></a>        <span class="src-var">$title </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:title[@lang = '&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a>.<span class="src-str">&quot;']&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a270"></a>        <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;div class='wizardTitle'&gt;&quot;</span>. <span class="src-var">$title</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">-&gt;</span><span class="src-id">get_content</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a271"></a>        <span class="src-var">$text </span>=   <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:overview/bxco:text&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a272"></a>    </li>
<li><a name="a273"></a>        </li>
<li><a name="a274"></a>        <span class="src-var">$dbparam </span>=  <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:overview/bxco:link&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a275"></a>        <span class="src-var">$dbparam </span>= <span class="src-var">$dbparam</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a276"></a>    <span class="src-comm">//       &lt;link thisname=&quot;Login_Name&quot; thatname=&quot;Login_Name&quot; type=&quot;session2dbfield&quot;/&gt;</span></li>
<li><a name="a277"></a>        <span class="src-var">$sessionID </span>= <span class="src-var">$_SESSION</span><span class="src-sym">[</span><span class="src-str">&quot;auth&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">&quot;fields&quot;</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$dbparam</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;thisname&quot;</span><span class="src-sym">)</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a278"></a>        <span class="src-var">$dbID </span>= <span class="src-var">$dbparam</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;thatname&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a279"></a>        <span class="src-var">$db </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getParameterDefault</span><span class="src-sym">(</span><span class="src-str">&quot;db&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a280"></a>        <span class="src-var">$table </span>=   <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:screen/@table&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a281"></a>        <span class="src-var">$table </span>= <span class="src-var">$table</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">-&gt;</span><span class="src-id">get_content</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a282"></a>        <span class="src-var">$count </span>=  <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">getOne</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">Select</span> <span class="src-id">count</span>(*) <span class="src-id">as</span> <span class="src-id">c</span> <span class="src-id">from</span> <span class="src-var">$table</span> <span class="src-id">where</span> <span class="src-var">$dbID</span> = '<span class="src-var">$sessionID</span>'</span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a283"></a>        <span class="src-var">$overview  </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-var">confctxt</span><span class="src-sym">-&gt;</span><span class="src-id">xpath_eval</span><span class="src-sym">(</span><span class="src-str">&quot;/bxco:wizard/bxco:overview&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a284"></a>        <span class="src-var">$multipleSubmit </span>= <span class="src-var">$overview</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;multipleSubmit&quot;</span><span class="src-sym">) </span><span class="src-sym">;</span></li>
<li><a name="a285"></a>        <span class="src-key">if </span><span class="src-sym">( </span><span class="src-var">$text</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">] </span>&amp;&amp; <span class="src-sym">(</span><span class="src-var">$multipleSubmit </span>== <span class="src-str">&quot;yes&quot; </span>|| <span class="src-var">$count </span>== <span class="src-num">0 </span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a286"></a>            <span class="src-var">$subxml </span>.=<span class="src-str">&quot;&lt;div class='wizardIntro'&gt;&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-var">$text</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;name&quot;</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a287"></a>            </li>
<li><a name="a288"></a>        <span class="src-sym">}</span></li>
<li><a name="a289"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$overview</span><span class="src-sym">-&gt;</span><span class="src-id">nodeset</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a290"></a>           </li>
<li><a name="a291"></a>            <span class="src-key">if </span><span class="src-sym">( </span><span class="src-var">$multipleSubmit </span>== <span class="src-str">&quot;yes&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a292"></a>                <span class="src-var">$subxml </span>.=<span class="src-str">&quot;&lt;div&gt;&lt;b&gt;History&lt;/b&gt;&lt;/div&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a293"></a>                <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;div class='wizardStatusInfo'&gt;&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-str">&quot;sie_haben&quot;</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a><span class="src-sym">)</span>.<span class="src-str">&quot;</span><span class="src-str"> <span class="src-var">$count</span> </span><span class="src-str">&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-str">&quot;bogen_ausgefuellt&quot;</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a294"></a>                <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;div&gt;&lt;input type='button' onclick='location.href=\&quot;./&quot;</span>. <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;link&quot;</span><span class="src-sym">) </span>.<span class="src-str">&quot;\&quot;' value='&quot;</span>. <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-str">&quot;neuer_ausfuellen&quot;</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a><span class="src-sym">)</span>.<span class="src-str">&quot;'/&gt;&lt;/div&gt;&quot;</span><span class="src-sym">;   </span></li>
<li><a name="a295"></a>            <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a296"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$count </span>== <span class="src-num">0</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a297"></a>                    <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;div&gt;&lt;input type='button' onclick='location.href=\&quot;./&quot;</span>. <span class="src-var">$wizardnode</span><span class="src-sym">-&gt;</span><span class="src-id">get_attribute</span><span class="src-sym">(</span><span class="src-str">&quot;link&quot;</span><span class="src-sym">) </span>.<span class="src-str">&quot;\&quot;' value='&quot;</span>. <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-str">&quot;noch_ausfuellen&quot;</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a><span class="src-sym">)</span>.<span class="src-str">&quot;'/&gt;&lt;/div&gt;&quot;</span><span class="src-sym">; </span></li>
<li><a name="a298"></a>                <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a299"></a>                    <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;div class='wizardStatusInfo'&gt;&quot;</span>. <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#methodgetText">getText</a><span class="src-sym">(</span><span class="src-str">&quot;bereits_ausgefuellt&quot;</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../popoon/transformer_formwizard.html#var$lang">lang</a><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;&quot;</span><span class="src-sym">;   </span></li>
<li><a name="a300"></a>                <span class="src-sym">}    </span></li>
<li><a name="a301"></a>                    </li>
<li><a name="a302"></a>            <span class="src-sym">}</span></li>
<li><a name="a303"></a>        <span class="src-sym">}</span></li>
<li><a name="a304"></a>        </li>
<li><a name="a305"></a>        </li>
<li><a name="a306"></a>        <span class="src-var">$subxml </span>.= <span class="src-str">&quot;&lt;/div&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a307"></a>        <span class="src-var">$subxml </span>= <span class="src-id">domxml_open_mem</span><span class="src-sym">(</span><span class="src-var">$subxml</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a308"></a>        <span class="src-key">return </span><span class="src-var">$subxml</span><span class="src-sym">;</span></li>
<li><a name="a309"></a>    <span class="src-sym">}</span></li>
<li><a name="a310"></a>    </li>
<li><a name="a311"></a>    <span class="src-doc">/**</span></li>
<li><a name="a312"></a><span class="src-doc">    * after used the challenge, we have to change it. but we don't have the auth class, therefore we</span></li>
<li><a name="a313"></a><span class="src-doc">    * I just imported the function to here</span></li>
<li><a name="a314"></a><span class="src-doc">    */</span></li>
<li><a name="a315"></a>    </li>
<li><a name="a316"></a>    </li>
<li><a name="a317"></a>    <span class="src-key">function </span><a href="../popoon/transformer_formwizard.html#methodreplacePlaceholder">replacePlaceholder</a><span class="src-sym">(</span><span class="src-var">$string</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a318"></a>        <a href="http://www.php.net/preg_match_all">preg_match_all</a><span class="src-sym">(</span><span class="src-str">&quot;#\{([^}]+)\}#&quot;</span><span class="src-sym">,</span><span class="src-var">$string</span><span class="src-sym">,</span><span class="src-var">$match</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a319"></a>        <span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$match</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a320"></a>            <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$match</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">] </span><span class="src-key">as </span><span class="src-var">$key </span>=&gt; <span class="src-var">$value</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a321"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$value </span>== <span class="src-str">&quot;idvalue&quot;</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a322"></a>                    <span class="src-var">$string </span>= <a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">'{'</span>.<span class="src-var">$value</span>.<span class="src-str">'}'</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getParameterDefault</span><span class="src-sym">(</span><span class="src-str">&quot;idvalue&quot;</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-var">$string</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a323"></a>                <span class="src-sym">}</span></li>
<li><a name="a324"></a>                <span class="src-key">else </span><span class="src-key">if </span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-var">$value</span><span class="src-sym">]</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a325"></a>                    <span class="src-var">$string </span>= <a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">'{'</span>.<span class="src-var">$value</span>.<span class="src-str">'}'</span><span class="src-sym">,</span><span class="src-var">$_POST</span><span class="src-sym">[</span><span class="src-var">$value</span><span class="src-sym">]</span><span class="src-sym">,</span><span class="src-var">$string</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a326"></a>                <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a327"></a>                    <span class="src-var">$string </span>= <a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">'{'</span>.<span class="src-var">$value</span>.<span class="src-str">'}'</span><span class="src-sym">,</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><span class="src-id">getParameterDefault</span><span class="src-sym">(</span><span class="src-var">$value</span><span class="src-sym">)</span><span class="src-sym">,</span><span class="src-var">$string</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a328"></a>                <span class="src-sym">}</span></li>
<li><a name="a329"></a>            <span class="src-sym">}</span></li>
<li><a name="a330"></a>        <span class="src-sym">}</span></li>
<li><a name="a331"></a>        <span class="src-key">return </span><span class="src-var">$string</span><span class="src-sym">;</span></li>
<li><a name="a332"></a>    <span class="src-sym">}</span></li>
<li><a name="a333"></a><span class="src-sym">}</span></li>
<li><a name="a334"></a>&nbsp;</li>
<li><a name="a335"></a><span class="src-php">?&gt;</span></li>
</ol></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Mon,  8 Mar 2004 08:32:14 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC2</a>
	</p>
	</body>
</html>